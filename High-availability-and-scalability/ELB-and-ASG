Loadbalancers
    - servers that forward traffic to multiple (EC2 instances) servers downstreams
    - single point of access(DNS) to the application
    - seamlessly handle failures of downstream instances
    - managed loadbalancer
    - Use health checks with port,route and endpoint to check the instance availability
    - 4 types of loadbalancers
        - Classic LB (Deprecated)
        - Application LB
        - Network LB
        - Gateway LB

Application LoadBalancer
    - Layer 7 (HTTP)
    - Loadbalancing to multiple HTTP applications across machines part of target groups.
    - routing based on path in URL , hostname in URL, query strings and headers.
    - Supports redirect from HTTP to HTTPS
    - It has a fixed hostname.
    - The client IP is not directly visble to the application , it is store in the loadbalancer headers (X-Forwaded-For, X-Forwaded-Port, X-Forwaded-Proto ) 
    - We have listener rules to decide which traffic is allowed or which traffic/path goes to which target group or gets what response.

What are Target groups?
    Target groups can be 
    - EC2 instances (can be managed by autoscaling groups)
    - ECS tasks (managed by ECS itself)
    - Lambda functions
    - IP Addresses
ALB can route to multiple target groups, healthchecks are also done on target groups.


Network LoadBalancer
    - Layer 4 (TCP & UDP)
    - Handles millions of requests per sec
    - Ultra low latency
    - Has one static IP per AZ
    - Target Groups can be 
        - EC2 insatnces
        - Private IPs
        - ALB
        - Helath checks support TCP,HTTP and HTTPS Protocols

Gateway LoadBalancer
    - A Gateway Load Balancer (GLB) is a specialized type of load balancer in AWS that works at the network layer (Layer 3 of the OSI model). Its main purpose is to help you easily deploy, scale, and manage virtual appliances such as firewalls, intrusion detection systems, and deep packet inspection tools.
    - Traffic enters goesto GLB then passed tp third party security appliances if everything looks good it is again forwarded back to GLB and then goes to application instances.
    - Uses the GENEVE protocol on port 6081
    

ELB- Sticky Sessions(Session Affinity)
    - Same client is always redirected to the same instance behind the loadbalancer
    - Used for CLB,ALB,NLB
    - Cookies used by stickeness has an expiration date we control
        - Application based cookie
            - Custom cookie
            - Application cookie (created by LB)
        - Duration based cookie
            - Generated by LB

Cross Zone Loadbalancing
    - Enables a load balancer to distribute incoming traffic evenly across all registered targets in all enabled Availability Zones (AZs), rather than limiting traffic distribution to targets within the same AZ as the load balancer node receiving the traffic.
    - For ALB it is enabled by default so no extra cost
    - For NLB and GLB it is disabled by default, cost applicable if enabled
    - For CLB disabled by default and no cost if enabled


ELB- SSL Certificates
    - Used for secure connection between clients and LB using SSL/TLS certificates
    - Clients can use SNI(Server Name Indication) to specify hostname they reach
        - solves problem of loading multiple SSL certificates onto one web server
        - Only works for ALB and NLB
    - AWS Certificate Manager (ACM) is a service from AWS that helps you easily create, manage, and deploy SSL/TLS certificates.


ELB- Connection Draining/Deregistration Delay
    - Time to complete the requests ongoing but not accepting any other requests and draining the instance

Auto Scaling Group
    - To scale up and scale down instances based on load
    - A launch template is used to set the configurations for the instances that will be launched.
    - Scaling policies can be used to scale up and down instances based on cloudwatch alarms.
    - Types
        - Dynamic scaling :
            - Target Tracking scaling
            - Simple/step scaling (Cloudwatch alarm)
        - Scheduled Scaling
        - Predective scaling
    - We have a cool down period in which ASG will not launch or terminate existing instances (to allow metrics to stabilize)
